# WhatsApp Expense Tracker Bot

This project is a WhatsApp bot that helps you track your expenses by sending messages or images of your receipts to a WhatsApp group. The bot uses OCR to read receipt images, parses the information, and saves it to a Google Sheet.

## Features

*   **Expense tracking via WhatsApp:** Add expenses by sending a message or a receipt image.
*   **OCR for Receipts:** Automatically extracts information from receipt images using Google Cloud Vision API.
*   **Manual Entry:** Manually add expenses with a simple text format.
*   **Google Sheets Integration:** Automatically saves all your expenses to a Google Sheet for easy tracking and analysis.
*   **AI-powered Parsing:** Uses a generative AI model to intelligently parse transaction details from OCR text.

## How It Works

The project consists of two main components:

1.  **`web-js` (Node.js):** A WhatsApp client that connects to your WhatsApp account. It listens for messages in a specific group and forwards them to the Python backend.
2.  **`data-services` (Python):** A Flask server that processes the messages. It handles image processing (OCR), data parsing, and saving the data to Google Sheets.

The data flow is as follows:

```
WhatsApp <--> web-js (Node.js) <--> data-services (Python) <--> Google Sheets
```

## Prerequisites

Before you begin, ensure you have the following:

*   **Node.js and npm:** For running the `web-js` service.
*   **Python 3:** For running the `data-services` backend.
*   **A WhatsApp Account:** To be used by the bot.
*   **Google Cloud Platform Account:**
    *   A project with the **Google Vision API** and **Google Sheets API** enabled.
    *   Service account credentials (a JSON file) for accessing these APIs.
*   **A Google Sheet:** A new or existing Google Sheet where the expenses will be saved. You need to share this sheet with the email address of your Google Cloud service account.

## Installation

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```

2.  **Set up `data-services` (Python backend):**
    *   Navigate to the `data-services` directory:
        ```bash
        cd data-services
        ```
    *   Create a virtual environment (optional but recommended):
        ```bash
        python -m venv venv
        source venv/bin/activate  # On Windows, use `venv\Scripts\activate`
        ```
    *   The `requirements.txt` file is encoded in UTF-16. You may need to convert it to UTF-8 before installing the dependencies. If you encounter issues, you can try to read the file and install the packages manually.
    *   Install the dependencies:
        ```bash
        pip install -r requirements.txt
        ```
    *   Place your Google Cloud service account JSON file in the `data-services/tools/resource` directory. You might need to update the code to point to the correct file name.
    *   Set up a `.env` file by copying the example:
        ```bash
        cp .env.example .env
        ```
    *   Edit the `.env` file to include the necessary configurations, such as the Google Sheet name.

3.  **Set up `web-js` (Node.js client):**
    *   Navigate to the `web-js` directory:
        ```bash
        cd ../web-js
        ```
    *   Install the dependencies:
        ```bash
        npm install
        ```
    *   Open `index.js` and update the `targetGroupId` with the ID of your target WhatsApp group. You can get the group ID by logging `msg.from` from a message sent in that group.

## Usage

1.  **Start the `data-services` backend:**
    ```bash
    cd data-services
    python app.py
    ```
    The server will start on `http://127.0.0.1:5000`.

2.  **Start the `web-js` client:**
    ```bash
    cd web-js
    node index.js
    ```
    On the first run, a QR code will be displayed in your terminal. Scan it with your phone's WhatsApp app to log in.

3.  **Use the bot in WhatsApp:**
    *   **Sending a receipt:** Send an image of a receipt to the target group. You can add a caption for the note.
    *   **Manual entry:** Send a text message in the format `amount#recipient#note`. For example: `50000#Lunch#Meeting with client`.
    *   **Help:** Send `help` or `bantuan` to get instructions.

---
*This README was generated by an AI assistant.*
